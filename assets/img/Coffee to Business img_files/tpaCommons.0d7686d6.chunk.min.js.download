(window.webpackJsonp__wix_thunderbolt_app=window.webpackJsonp__wix_thunderbolt_app||[]).push([[127],{409:function(e,t,n){"use strict";n.r(t),n.d(t,"site",(function(){return m}));var r=n(35),a=n(394),o=n(624),i=n(277);n.d(t,"MasterPageTpaPropsCacheSymbol",(function(){return i.a})),n.d(t,"TpaSrcBuilderSymbol",(function(){return i.e})),n.d(t,"TpaContextMappingSymbol",(function(){return i.b}));var c=n(625),u=n(627),d=n(626),p=n(628),l=n(629);n.d(t,"TpaHandlersManagerSymbol",(function(){return i.c})),n.d(t,"TpaSectionSymbol",(function(){return i.d})),n.d(t,"name",(function(){return i.f}));var f=n(526);for(var s in f)["default","site","TpaHandlersManagerSymbol","TpaSectionSymbol","name","MasterPageTpaPropsCacheSymbol","TpaSrcBuilderSymbol","TpaContextMappingSymbol"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return f[e]}))}(s);var m=function(e){e(r.a.AppDidMountHandler).to(o.a),e(i.a).to(c.a),e(i.b).to(d.a),e(i.e).to(u.a),e(i.d).to(p.a),e(a.b).to(l.c),e(a.b).to(l.g),e(a.b).to(l.f),e(a.b).to(l.b),e(a.b).to(l.e),e(a.b).to(l.d),e(a.b).to(l.h),e(a.b).to(l.a)}},526:function(e,t){},598:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),a=function(e,t){var n=e.split("/"),a=n.indexOf(t||"");return a<0||n[a]!==t?null:Object(r.e)(n.splice(a)).slice(1)}},624:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),a=n(7),o=n(389),i=n(45),c=n(15),u=n(277),d=n(306),p=n(178),l=function(e){if(e.data)try{return JSON.parse(e.data)}catch(e){}return{}},f=["getWixUpgradeUrl","stylesReady","getViewModeInternal","setHelpArticle"],s=Object(a.h)([d.a,c.a,u.b,o.e,o.c,i.f,Object(a.g)(p.a)],(function(e,t,n,a,o,i,c){return{appDidMount:function(){e.addWindowMessageHandler({canHandleEvent:function(e){return!!(e.source&&(t=l(e),t&&["TPA","TPA2"].includes(t.intent)));var t},handleEvent:function(e){return Object(r.b)(this,void 0,void 0,(function(){var o,d,p,s,m,v,g;return Object(r.d)(this,(function(b){switch(b.label){case 0:return o=l(e),d=o.type,p=o.callId,f.includes(d)?[2]:(s=function(e){var t=e.compId;if(t)return n.getTpaComponentContextId(t)||a.getContextIdOfCompId(t)}(o),m=n.getTpaComponentIdFromTemplate(o.compId),v=Object(r.a)(Object(r.a)({},o),{compId:null!=m?m:o.compId}),g=v.compId,c&&c.tpa.addMessage({msg:v,compId:g,contextId:s}),s?[4,(h=s,Object(r.b)(void 0,void 0,Promise,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return[4,t(h)];case 1:return[2,e.sent().getAllImplementersOnPageOf(u.c)[0]]}}))})))]:(console.error("TPA handler message caller does not belong to any page",{type:d,callId:p,compId:g}),[2]));case 1:return b.sent().handleMessage(e.source,v).catch((function(e){console.error("HandleTpaMessageError",d,s,g,e),i.captureError(e,{tags:{feature:"tpa",handlerName:d},extra:{handlerName:d,compId:g}})})),[2]}var h}))}))}})}}}))},625:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n.n(r),o=n(7),i=n(389),c=n(273),u=Object(o.h)([i.c,c.a],(function(e,t){var n={};return{cacheProps:function(t,r){var o=a.a.omitBy(r||e.get(t),a.a.isFunction);n[t]=a.a.isEmpty(o)?null:o},getCachedProps:function(e){var r,o,i,c,u=n[e];if(u)return a.a.isEqual(null===(o=null===(r=t.getCurrentRouteInfo())||void 0===r?void 0:r.dynamicRouteData)||void 0===o?void 0:o.publicData,null===(c=null===(i=t.getPreviousRouterInfo())||void 0===i?void 0:i.dynamicRouteData)||void 0===c?void 0:c.publicData)||delete u.src,u}}}))},626:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(7),a=Object(r.h)([],(function(){var e={},t={};return{registerTpasForContext:function(t,n){n.forEach((function(n){e[n]=t}))},getTpaComponentContextId:function(t){return e[t]},registerTpaTemplateId:function(e,n){t[e]=n},getTpaComponentIdFromTemplate:function(e){return t[e]}}}))},627:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(0),a=n(7),o=n(25),i=n(45),c=n(394),u=n(277),d=n(11),p=n.n(d),l=n(598),f=Object(a.h)([Object(a.f)(o.f,u.f),i.b,Object(a.e)(c.b)],(function(e,t,n){var a=e.widgetsClientSpecMapData,o=e.externalBaseUrl,i=e.requestUrl,c=function(e,n,a){var c,u=Boolean(n.tpaPageUri&&!p.a.isNil(a.applicationId)&&a.applicationId===n.tpaApplicationId),d=Object(r.e)(((null==t?void 0:t.location.href)||i).replace(o,"").split("?"),1)[0],f=Object(r.e)(decodeURIComponent(d).split("?"),2),s=f[0],m=f[1],v=u&&Object(l.a)(s,n.tpaPageUri);return v&&(null===(c=a.appPage)||void 0===c?void 0:c.defaultPage)&&v.unshift(a.appPage.defaultPage),v?function(e,t,n){if(0===e.length)return t;var r=e.join("/"),a=new URL(t);(a.pathname+="/"+r,n)&&new URLSearchParams(n).forEach((function(e,t){return a.searchParams.append(t,e)}));return a.href}(v,e,m):e};return{buildSrc:function(e,t,o,i,u){void 0===u&&(u={});var d,l=a[o.widgetId]||{},f=p.a.merge({tpaInnerRouteConfig:null,extraQueryParams:{},appDefinitionId:""},u),s={compId:e,pageId:t,tpaCompData:o,options:f},m=p.a.assign.apply(p.a,Object(r.g)([{}],n.map((function(e){return e.getQueryParams(s)})))),v=f.tpaInnerRouteConfig?c(i,f.tpaInnerRouteConfig,l):i;try{d=new URL(v)}catch(e){return""}return p.a.entries(m).forEach((function(e){var t=Object(r.e)(e,2),n=t[0],a=t[1];p.a.isNil(a)||d.searchParams.set(n,a)})),d.href}}}))},628:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(7),a=Object(r.h)([],(function(){var e={},t={};return{registerTpaSection:function(n,r){e[n]=r,t[r.appDefinitionId]=n},unregisterTpaSection:function(n){var r=e[n],a=null==r?void 0:r.appDefinitionId;delete e[n],a&&delete t[a]},getTpaSectionByAppDefinitionId:function(n){var r=t[n];return e[r]}}}))},629:function(e,t,n){"use strict";n.d(t,"c",(function(){return v})),n.d(t,"g",(function(){return g})),n.d(t,"f",(function(){return b})),n.d(t,"b",(function(){return h})),n.d(t,"e",(function(){return y})),n.d(t,"d",(function(){return I})),n.d(t,"h",(function(){return O})),n.d(t,"a",(function(){return P}));var r=n(0),a=n(7),o=n(32),i=n(25),c=n(45),u=n(382),d=n(273),p=n(277),l=n(11),f=n.n(l),s=n(33),m=n(29),v=Object(a.h)([Object(a.f)(i.f,p.f)],(function(e){var t=e.siteRevision,n=e.viewMode,a=e.deviceType,o=e.locale,i=e.tpaDebugParams,c=e.timeZone;return{getQueryParams:function(e){var u=e.compId,d=e.pageId,p=e.tpaCompData,l=e.options.extraQueryParams,s=p.templateId,m=p.externalId,v=p.width,g=p.height;return Object(r.a)(Object(r.a)({pageId:d,compId:s||u,viewerCompId:u,siteRevision:""+t,viewMode:n,deviceType:a,externalId:m,locale:o,tz:c,width:f.a.isNumber(v)?""+v:null,height:f.a.isNumber(g)?""+g:null},i),l)}}})),g=Object(a.h)([Object(a.f)(i.f,p.f),o.a],(function(e,t){var n=e.widgetsClientSpecMapData;return{getQueryParams:function(e){var r=e.tpaCompData,a=e.options,o=(n[r.widgetId]||{}).appDefinitionId||a.appDefinitionId||"";return{instance:t.getAppInstanceByAppDefId(o)}}}})),b=Object(a.h)([Object(a.f)(i.f,p.f),c.b],(function(e,t){var n=e.requestUrl,r=e.extras;return{getQueryParams:function(){var e,a=new URL((null===(e=null==t?void 0:t.location)||void 0===e?void 0:e.href)||n);return{currency:r.currency,currentCurrency:a.searchParams.get("currency")||r.currency}}}})),h=Object(a.h)([u.b],(function(e){var t=e.viewerSessionId;return{getQueryParams:function(){return{vsi:t}}}})),y=Object(a.h)([s.a],(function(e){return{getQueryParams:function(){var t,n=e.getCurrentConsentPolicy();return{"consent-policy":(t=n).defaultPolicy&&f.a.every(t.policy)||!e._getConsentPolicyHeader()["consent-policy"]?void 0:decodeURIComponent(e._getConsentPolicyHeader()["consent-policy"])}}}})),I=Object(a.h)([m.a],(function(e){return{getQueryParams:function(){return{commonConfig:JSON.stringify(e.getCommonConfigForUrl())}}}})),O=Object(a.h)([d.a],(function(e){return{getQueryParams:function(){var t,n,r=null===(n=null===(t=e.getCurrentRouteInfo())||void 0===t?void 0:t.dynamicRouteData)||void 0===n?void 0:n.publicData;return{routerData:r?JSON.stringify(r):null}}}})),P=Object(a.h)([Object(a.f)(i.f,p.f),c.b],(function(e,t){var n=e.appSectionParams,a=e.requestUrl;return{getQueryParams:function(){return Object(r.a)({},function(){var e;if(t){var r=new URL((null===(e=null==t?void 0:t.location)||void 0===e?void 0:e.href)||a).searchParams.get("appSectionParams");return JSON.parse(decodeURIComponent(r||"{}"))||{}}return n}())}}}))}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/tpaCommons.0d7686d6.chunk.min.js.map